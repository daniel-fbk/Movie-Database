const e=document.getElementById("delete-bookmarks");let t=[];e.addEventListener("click",()=>{t=[],localStorage.setItem("movies",JSON.stringify(t)),u(t)});const a=()=>{let e=localStorage.getItem("movies");return e&&u(t=JSON.parse(e)),t},n=e=>localStorage.setItem("filters",JSON.stringify(e)),l=()=>JSON.parse(localStorage.getItem("filters"))||{sortType:""},o=document.querySelector(".movie-container"),r=async e=>{let{title:a,popularity:n}=e;console.log(e),console.log(a,n),o.replaceChildren();let l=document.createElement("div"),r=document.createElement("img");l.classList.add("poster-container"),r.classList.add("poster"),r.src=`https://image.tmdb.org/t/p/original${e.poster_path}`;let s=document.createElement("h1");s.classList.add("movie-title"),s.textContent=a;let i=document.createElement("div");i.classList.add("genres-container"),e.genres.forEach(e=>{let t=document.createElement("p");t.classList.add("genres"),t.textContent=e.name,i.append(t)});let c=document.createElement("p"),d=document.createElement("p"),m=document.createElement("p");c.classList.add("description"),d.classList.add("release-date"),m.classList.add("age-rating"),c.textContent=e.overview,d.textContent=e.release_date,m.textContent=5;let p=document.createElement("p");p.classList.add("run-time"),p.textContent=`Runtime: ${e.runtime} minutes`;let g=document.createElement("div"),y=document.createElement("img"),v=document.createElement("p");g.classList.add("rating-container"),y.classList.add("rating-star"),v.classList.add("rating");let E=document.createElement("p");E.classList.add("revenue"),E.textContent=`$${e.revenue}`;let h=document.createElement("a");h.classList.add("homepage"),h.textContent=`HomePage ${e.homepage}`,h.href=e.homepage,h.target="_blank",o.append(l,s,i,c,d,m,p,g,E,h),o.prepend(((e,a)=>{let n=document.createElement("button");return n.classList.add("bookmark-button"),n.textContent="Bookmark",n.addEventListener("click",()=>{let n={title:e,popularity:a};t.some(e=>e.title===n.title)?alert(`${e} is already in bookmarks`):(console.log(n),t.push(n),localStorage.setItem("movies",JSON.stringify(t)),u(t))}),n})(a,n)),l.append(r),g.append(y,v)},s=document.getElementById("sort-by"),i=document.getElementById("min-popularity"),c=document.getElementById("min-pop-value"),d=l();s.value=d.sortType||"",i.value=d.minPopularity||0,c.textContent=d.minPopularity||0,s.addEventListener("change",e=>{d.sortType=e.target.value,n(d),u(a())}),i.addEventListener("input",e=>{let t=Number(e.target.value);c.textContent=t,d.minPopularity=t,n(d),u(a())});const m=document.getElementById("bookmarks-list"),p=async e=>{r(e)},u=e=>{let t,a;m.replaceChildren();let n=l();(t=e.filter(e=>(e.popularity||0)>=(n.minPopularity||0)),a=n.sortType,t.slice().sort((e,t)=>"most-popular"===a?t.popularity-e.popularity:"least-popular"===a?e.popularity-t.popularity:"alpha-asc"===a?e.title.localeCompare(t.title):"alpha-desc"===a?t.title.localeCompare(e.title):0)).forEach(e=>{let t=document.createElement("li");t.textContent=e.title,m.append(t)})},g=async(e,t)=>{let a=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${t}`);p(await a.json())},y=document.getElementById("nav-search-form"),v=document.getElementById("search-bar");document.getElementById("live-search-dropdown");const E=async(e,t)=>{let a=await fetch(`https://api.themoviedb.org/3/search/movie?query=${e}&api_key=${t}`);g((await a.json()).results[0].id,t)};y.addEventListener("submit",async e=>{e.preventDefault();let t=new FormData(y).get("search-input");t&&(v.value="",E(t,"1b4c8d03a375eaff8b7e021ed3e1206c"))}),(async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/popular?language=en-US&page=1&api_key=${e}`);g((await t.json()).results[0].id,e)})("1b4c8d03a375eaff8b7e021ed3e1206c"),a();
//# sourceMappingURL=Movie-Database.cf88b810.js.map
