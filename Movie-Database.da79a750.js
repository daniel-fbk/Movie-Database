let e=[];const t=()=>{let t=localStorage.getItem("movies");return t&&i(e=JSON.parse(t)),e},a=()=>JSON.parse(localStorage.getItem("filters"))||{sortType:""},n=document.querySelector(".movie-container"),l=async t=>{let{title:a,popularity:l}=t;console.log(a,l),n.replaceChildren();let o=document.createElement("div"),s=document.createElement("img");o.classList.add("poster-container"),s.classList.add("poster"),s.src=`https://image.tmdb.org/t/p/original${t.poster_path}`;let r=document.createElement("h1");r.classList.add("movie-title"),r.textContent=t.title;let c=document.createElement("div");c.classList.add("genres-container"),t.genres.forEach(e=>{let t=document.createElement("p");t.classList.add("genres"),t.textContent=e.name,c.append(t)});let d=document.createElement("p"),m=document.createElement("p"),p=document.createElement("p");d.classList.add("description"),m.classList.add("release-date"),p.classList.add("age-rating"),d.textContent=t.overview,m.textContent=t.release_date,p.textContent=5;let u=document.createElement("p");u.classList.add("run-time"),u.textContent=`Runtime: ${t.runtime} minutes`;let g=document.createElement("div"),y=document.createElement("img"),h=document.createElement("p");g.classList.add("rating-container"),y.classList.add("rating-star"),h.classList.add("rating");let v=document.createElement("p");v.classList.add("revenue"),v.textContent=`$${t.revenue}`;let E=document.createElement("a");E.classList.add("homepage"),E.textContent=`HomePage ${t.homepage}`,E.href=t.homepage,E.target="_blank",n.append(o,a,c,d,m,p,u,g,v,E),n.prepend(((t,a)=>{let n=document.createElement("button");return n.classList.add("bookmark-button"),n.textContent="Bookmark",n.addEventListener("click",()=>{let n={title:t,popularity:a};e.some(e=>e.title===n.title)?alert(`${t} is already in bookmarks`):(console.log(n),e.push(n),localStorage.setItem("movies",JSON.stringify(e)),i(e))}),n})(a,l)),o.append(s),g.append(y,h)},o=document.getElementById("sort-by"),s=a();o.value=s.sortType,o.addEventListener("change",e=>{s.sortType=e.target.value,localStorage.setItem("filters",JSON.stringify(s)),i(t())});const r=document.getElementById("bookmarks-list"),c=async e=>{l(e)},i=e=>{let t;r.replaceChildren(),(t=a().sortType,e.slice().sort((e,a)=>"most-popular"===t?a.popularity-e.popularity:"least-popular"===t?e.popularity-a.popularity:"alpha-asc"===t?e.title.localeCompare(a.title):"alpha-desc"===t?a.title.localeCompare(e.title):0)).forEach(e=>{let t=document.createElement("li");t.textContent=e.title,r.append(t)})},d=async(e,t)=>{let a=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${t}`);c(await a.json())},m=document.getElementById("nav-search-form"),p=document.getElementById("search-bar");document.getElementById("live-search-dropdown");const u=async(e,t)=>{let a=await fetch(`https://api.themoviedb.org/3/search/movie?query=${e}&api_key=${t}`);d((await a.json()).results[0].id,t)};m.addEventListener("submit",async e=>{e.preventDefault();let t=new FormData(m).get("search-input");t&&(p.value="",u(t,"1b4c8d03a375eaff8b7e021ed3e1206c"))}),(async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/popular?language=en-US&page=1&api_key=${e}`);d((await t.json()).results[0].id,e)})("1b4c8d03a375eaff8b7e021ed3e1206c"),t();
//# sourceMappingURL=Movie-Database.da79a750.js.map
