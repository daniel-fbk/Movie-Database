const e=async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/${e}/credits?api_key=1b4c8d03a375eaff8b7e021ed3e1206c`);return await t.json()},t=document.getElementById("delete-bookmarks");let a=[];t.addEventListener("click",()=>{a=[],localStorage.setItem("movies",JSON.stringify(a)),g(a)});const n=()=>{let e=localStorage.getItem("movies");return e&&g(a=JSON.parse(e)),a},l=e=>localStorage.setItem("filters",JSON.stringify(e)),s=()=>JSON.parse(localStorage.getItem("filters"))||{sortType:""},o=document.querySelector(".movie-container"),i=async e=>{let{title:t,popularity:n}=e;o.replaceChildren();let l=document.createElement("div"),s=document.createElement("img");l.classList.add("poster-container"),s.classList.add("poster"),s.src=`https://image.tmdb.org/t/p/original${e.poster_path}`;let i=document.createElement("h1");i.classList.add("movie-title"),i.textContent=t;let r=document.createElement("div");r.classList.add("genres-container"),e.genres.forEach(e=>{let t=document.createElement("p");t.classList.add("genres"),t.textContent=e.name,r.append(t)});let d=document.createElement("p"),c=document.createElement("p"),m=document.createElement("p");d.classList.add("description"),c.classList.add("release-date"),m.classList.add("age-rating"),d.textContent=e.overview,c.textContent=e.release_date,m.textContent=5;let p=document.createElement("p");p.classList.add("run-time"),p.textContent=`Runtime: ${e.runtime} minutes`;let u=document.createElement("div"),y=document.createElement("img"),h=document.createElement("p");u.classList.add("rating-container"),y.classList.add("rating-star"),h.classList.add("rating");let v=document.createElement("p");v.classList.add("revenue"),v.textContent=`$${e.revenue}`;let E=document.createElement("a");E.classList.add("homepage"),E.textContent=`HomePage ${e.homepage}`,E.href=e.homepage,E.target="_blank",o.append(l,i,r,d,c,m,p,u,v,E),o.prepend(((e,t)=>{let n=document.createElement("button");return n.classList.add("bookmark-button"),n.textContent="Bookmark",n.addEventListener("click",()=>{let n={title:e,popularity:t};a.some(e=>e.title===n.title)?alert(`${e} is already in bookmarks`):(console.log(n),a.push(n),localStorage.setItem("movies",JSON.stringify(a)),g(a))}),n})(t,n)),l.append(s),u.append(y,h)},r=document.getElementById("sort-by"),d=document.getElementById("min-popularity"),c=document.getElementById("min-pop-value"),m=s();r.value=m.sortType||"",d.value=m.minPopularity||0,c.textContent=m.minPopularity||0,r.addEventListener("change",e=>{m.sortType=e.target.value,l(m),g(n())}),d.addEventListener("input",e=>{let t=Number(e.target.value);c.textContent=t,m.minPopularity=t,l(m),g(n())});const p=document.getElementById("bookmarks-list"),u=async e=>{i(e)},g=e=>{let t,a;p.replaceChildren();let n=s();(t=e.filter(e=>(e.popularity||0)>=(n.minPopularity||0)),a=n.sortType,t.slice().sort((e,t)=>"most-popular"===a?t.popularity-e.popularity:"least-popular"===a?e.popularity-t.popularity:"alpha-asc"===a?e.title.localeCompare(t.title):"alpha-desc"===a?t.title.localeCompare(e.title):0)).forEach(e=>{let t=document.createElement("li");t.textContent=e.title,p.append(t)})},y=async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=1b4c8d03a375eaff8b7e021ed3e1206c`),a=await t.json();console.log(a),u(a)},h=new URL(import.meta.resolve("d6tMb")).href,v=document.getElementById("nav-search-form"),E=document.getElementById("search-bar"),L=document.getElementById("live-search-dropdown"),f=async(e,t)=>{let a=await fetch(`https://api.themoviedb.org/3/search/movie?query=${e}&api_key=1b4c8d03a375eaff8b7e021ed3e1206c`),n=(await a.json()).results;if(console.log(n),"input"===t)return n;y(n[0].id)};v.addEventListener("submit",async e=>{e.preventDefault(),L.replaceChildren();let t=new FormData(v).get("search-input");t&&(E.value="",f(t))}),E.addEventListener("input",async()=>{let t=E.value.trim();if(0===t.length)return void L.replaceChildren();L.replaceChildren();let a=await f(t,"input");a&&0!==a.length&&a.slice(0,8).forEach(async t=>{let a=t.id,{cast:n}=await e(a);console.log(n);let l=document.createElement("div");l.classList.add("suggested-container");let s=document.createElement("div");s.classList.add("suggested-poster-container");let o=document.createElement("img");o.classList.add("suggested-poster"),console.log(t.poster_path),o.src=t.poster_path?`https://image.tmdb.org/t/p/original${t.poster_path}`:h;let i=document.createElement("div");i.classList.add("suggested-details-container");let r=document.createElement("p");r.classList.add("suggested-title"),r.textContent=t.title;let d=document.createElement("p");d.classList.add("suggested-info"),d.classList.add("suggested-year"),d.textContent=t.release_date.slice(0,4);let c=document.createElement("div");c.classList.add("actors-container");let m=n.slice(0,2).map(e=>e.name).join(", "),p=document.createElement("p");p.classList.add("suggested-info"),p.textContent=m,l.append(s,i),s.append(o),i.append(r,d,c),c.append(p),L.append(l)})}),(async()=>{let e=await fetch("https://api.themoviedb.org/3/movie/popular?language=en-US&page=1&api_key=1b4c8d03a375eaff8b7e021ed3e1206c");y((await e.json()).results[0].id)})(),n();
//# sourceMappingURL=Movie-Database.e15989e0.js.map
