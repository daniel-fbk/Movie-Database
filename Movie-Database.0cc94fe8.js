const e=async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/${e}/credits?api_key=1b4c8d03a375eaff8b7e021ed3e1206c`);return await t.json()},t=document.getElementById("delete-bookmarks");let a=[];t.addEventListener("click",()=>{a=[],localStorage.setItem("movies",JSON.stringify(a)),y(a)});const n=()=>{let e=localStorage.getItem("movies");return e&&y(a=JSON.parse(e)),a},l=e=>localStorage.setItem("filters",JSON.stringify(e)),s=()=>JSON.parse(localStorage.getItem("filters"))||{sortType:""},i=async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/${e}/images?api_key=1b4c8d03a375eaff8b7e021ed3e1206c`);return await t.json()},r=document.getElementById("wrapper"),o=document.querySelector(".movie-container"),d=async e=>{let t=Math.floor(e.runtime/60)+"h "+e.runtime%60+"m",{title:n,popularity:l}=e;o.replaceChildren();let s=await i(e.id);console.log(s);let d=s.backdrops.length>0?s.backdrops[0].file_path:s.posters[0].file_path;r.style.setProperty("--bg-url",`url("https://image.tmdb.org/t/p/original${d}")`);let c=document.createElement("div"),m=document.createElement("img");c.classList.add("poster-container"),m.classList.add("poster"),m.src=`https://image.tmdb.org/t/p/original${e.poster_path}`;let p=document.createElement("h1");p.classList.add("movie-title"),p.textContent=n;let u=document.createElement("div");u.classList.add("genres-container"),e.genres.forEach(e=>{let t=document.createElement("p");t.classList.add("genres"),t.textContent=e.name,u.append(t)});let g=document.createElement("p"),h=document.createElement("p"),v=document.createElement("p");g.classList.add("description"),h.classList.add("release-date"),v.classList.add("age-rating"),g.textContent=e.overview,h.textContent=e.release_date,v.textContent=5;let E=document.createElement("p");E.classList.add("run-time"),E.textContent=t;let f=document.createElement("div"),L=document.createElement("img"),b=document.createElement("p");f.classList.add("rating-container"),L.classList.add("rating-star"),b.classList.add("rating");let C=document.createElement("a");C.classList.add("homepage"),C.textContent=`HomePage ${e.homepage}`,C.href=e.homepage,C.target="_blank";let k=document.createElement("article");k.classList.add("movie-details");let w=document.createElement("div");w.classList.add("genre-year-age-time"),o.append(c,k,((e,t)=>{let n=document.createElement("button");return n.classList.add("bookmark-button"),n.textContent="Favorite",n.addEventListener("click",()=>{let n={title:e,popularity:t};a.some(e=>e.title===n.title)?alert(`${e} is already in bookmarks`):(console.log(n),a.push(n),localStorage.setItem("movies",JSON.stringify(a)),y(a))}),n})(n,l)),k.append(p,w,g,f,C),c.append(m),f.append(L,b),w.append(u,h,v,E)},c=document.getElementById("sort-by"),m=document.getElementById("min-popularity"),p=document.getElementById("min-pop-value"),u=s();c.value=u.sortType||"",m.value=u.minPopularity||0,p.textContent=u.minPopularity||0,c.addEventListener("change",e=>{u.sortType=e.target.value,l(u),y(n())}),m.addEventListener("input",e=>{let t=Number(e.target.value);p.textContent=t,u.minPopularity=t,l(u),y(n())});const g=document.getElementById("bookmarks-list"),h=async e=>{d(e)},y=e=>{let t,a;g.replaceChildren();let n=s();(t=e.filter(e=>(e.popularity||0)>=(n.minPopularity||0)),a=n.sortType,t.slice().sort((e,t)=>"most-popular"===a?t.popularity-e.popularity:"least-popular"===a?e.popularity-t.popularity:"alpha-asc"===a?e.title.localeCompare(t.title):"alpha-desc"===a?t.title.localeCompare(e.title):0)).forEach(e=>{let t=document.createElement("li");t.textContent=e.title,g.append(t)})},v=async e=>{let t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=1b4c8d03a375eaff8b7e021ed3e1206c`);h(await t.json())},E=async(e,t)=>{let a=await fetch(`https://api.themoviedb.org/3/search/movie?query=${e}&api_key=1b4c8d03a375eaff8b7e021ed3e1206c`),n=(await a.json()).results;if("input"===t)return n;v(n[0].id)},f=document.getElementById("nav-search-form"),L=document.getElementById("search-bar"),b=document.getElementById("live-search-dropdown"),C=new URL(import.meta.resolve("8QvJ8")).href;f.addEventListener("submit",async e=>{e.preventDefault(),b.replaceChildren();let t=new FormData(f).get("search-input");t&&(L.value="",E(t))});const k=async()=>{let t=L.value.trim();if(0===t.length)return void b.replaceChildren();b.replaceChildren();let a=(await E(t,"input")).slice(0,6),n=await Promise.all(a.map(async t=>{let a=await e(t.id);return{...t,cast:a.cast}}));console.log(n),n.forEach(e=>{let t=document.createElement("div");t.classList.add("suggested-container"),t.addEventListener("click",async()=>{b.replaceChildren(),v(e.id)});let a=document.createElement("div");a.classList.add("suggested-poster-container");let n=document.createElement("img");n.classList.add(e.poster_path?"suggested-poster":"suggested-poster-fallback"),n.src=e.poster_path?`https://image.tmdb.org/t/p/original${e.poster_path}`:C;let l=document.createElement("div");l.classList.add("suggested-details-container");let s=document.createElement("p");s.classList.add("suggested-title"),s.textContent=e.title;let i=document.createElement("p");i.classList.add("suggested-info","suggested-year"),i.textContent=e.release_date.slice(0,4);let r=document.createElement("div");r.classList.add("actors-container");let o=e.cast.slice(0,2).map(e=>e.name).join(", "),d=document.createElement("p");d.classList.add("suggested-info"),d.textContent=o,t.append(a,l),a.append(n),l.append(s,i,r),r.append(d),b.append(t)})};L.addEventListener("input",()=>{k()}),L.addEventListener("click",()=>{k()}),document.addEventListener("click",e=>{b.contains(e.target)||e.target===L||b.replaceChildren()}),(async()=>{let e=await fetch("https://api.themoviedb.org/3/movie/popular?language=en-US&page=1&api_key=1b4c8d03a375eaff8b7e021ed3e1206c");v((await e.json()).results[10].id)})();
//# sourceMappingURL=Movie-Database.0cc94fe8.js.map
